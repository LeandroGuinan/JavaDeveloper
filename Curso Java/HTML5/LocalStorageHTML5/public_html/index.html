<!DOCTYPE html>

<html>
    <head>
        <title>Manejo de Local Storage</title>
        <meta charset="UTF-8">
        <script src="https://code.jquery.com/jquery-3.5.1.min.js" type="text/javascript"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.3/modernizr.min.js" type="text/javascript"></script>
        <script type="text/javascript">
            $(document).ready(function () {
                
                $("#lista").blur(function(){
                    
                    localStorage.setItem("listado", $("#lista").html());
                    location.reload();
                    
                });
                
                if(localStorage.getItem("listado")){
                    
                    $("#mensaje").html("<h3>Datos almacenados en Local Storage</h3>");
                    $("#lista").html(localStorage.getItem("listado"));
                    $("#resultado").text(localStorage.getItem("listado"));
                    
                }else{
                    
                    $("#mensaje").text("No hay datos en Local Storage");
                    
                }
                
                $("#limpiar").click(function(){
                    
                    localStorage.removeItem("listado");
                    location.reload();
                    
                });
                
                window.addEventListener("storage",escucharEvento,false);
                
                function escucharEvento(e){
                    alert("Evento generando localStorage" + e.storageArea.listado);
                    location.reload();
                }
            });
            
        </script>
    </head>
    <body>
        <h1>Manejo Local Storage</h1>
        <div>
            <ul id="lista" contenteditable="true">
                <li></li>
            </ul>
        </div>
        
        <input type="button" id="limpiar" value="limpiar"/>
        <div id="mensaje"></div>
        <div id="resultado"></div>
        
    </body>
</html>
